!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).App=t()}}(function(){return function s(r,o,c){function d(e,t){if(!o[e]){if(!r[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(l)return l(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var a=o[e]={exports:{}};r[e][0].call(a.exports,function(t){return d(r[e][1][t]||t)},a,a.exports,s,r,o,c)}return o[e].exports}for(var l="function"==typeof require&&require,t=0;t<c.length;t++)d(c[t]);return d}({1:[function(t,e,i){e.exports=t("./lib/axios")},{"./lib/axios":3}],2:[function(l,t,e){"use strict";var h=l("./../utils"),p=l("./../core/settle"),u=l("./../helpers/buildURL"),f=l("./../helpers/parseHeaders"),v=l("./../helpers/isURLSameOrigin"),m=l("../core/createError");t.exports=function(d){return new Promise(function(i,n){var a=d.data,s=d.headers;h.isFormData(a)&&delete s["Content-Type"];var r=new XMLHttpRequest;if(d.auth){var t=d.auth.username||"",e=d.auth.password||"";s.Authorization="Basic "+btoa(t+":"+e)}if(r.open(d.method.toUpperCase(),u(d.url,d.params,d.paramsSerializer),!0),r.timeout=d.timeout,r.onreadystatechange=function(){if(r&&4===r.readyState&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in r?f(r.getAllResponseHeaders()):null,e={data:d.responseType&&"text"!==d.responseType?r.response:r.responseText,status:r.status,statusText:r.statusText,headers:t,config:d,request:r};p(i,n,e),r=null}},r.onabort=function(){r&&(n(m("Request aborted",d,"ECONNABORTED",r)),r=null)},r.onerror=function(){n(m("Network Error",d,null,r)),r=null},r.ontimeout=function(){n(m("timeout of "+d.timeout+"ms exceeded",d,"ECONNABORTED",r)),r=null},h.isStandardBrowserEnv()){var o=l("./../helpers/cookies"),c=(d.withCredentials||v(d.url))&&d.xsrfCookieName?o.read(d.xsrfCookieName):void 0;c&&(s[d.xsrfHeaderName]=c)}if("setRequestHeader"in r&&h.forEach(s,function(t,e){void 0===a&&"content-type"===e.toLowerCase()?delete s[e]:r.setRequestHeader(e,t)}),d.withCredentials&&(r.withCredentials=!0),d.responseType)try{r.responseType=d.responseType}catch(t){if("json"!==d.responseType)throw t}"function"==typeof d.onDownloadProgress&&r.addEventListener("progress",d.onDownloadProgress),"function"==typeof d.onUploadProgress&&r.upload&&r.upload.addEventListener("progress",d.onUploadProgress),d.cancelToken&&d.cancelToken.promise.then(function(t){r&&(r.abort(),n(t),r=null)}),void 0===a&&(a=null),r.send(a)})}},{"../core/createError":9,"./../core/settle":13,"./../helpers/buildURL":17,"./../helpers/cookies":19,"./../helpers/isURLSameOrigin":21,"./../helpers/parseHeaders":23,"./../utils":25}],3:[function(t,e,i){"use strict";var n=t("./utils"),a=t("./helpers/bind"),s=t("./core/Axios"),r=t("./core/mergeConfig");function o(t){var e=new s(t),i=a(s.prototype.request,e);return n.extend(i,s.prototype,e),n.extend(i,e),i}var c=o(t("./defaults"));c.Axios=s,c.create=function(t){return o(r(c.defaults,t))},c.Cancel=t("./cancel/Cancel"),c.CancelToken=t("./cancel/CancelToken"),c.isCancel=t("./cancel/isCancel"),c.all=function(t){return Promise.all(t)},c.spread=t("./helpers/spread"),e.exports=c,e.exports.default=c},{"./cancel/Cancel":4,"./cancel/CancelToken":5,"./cancel/isCancel":6,"./core/Axios":7,"./core/mergeConfig":12,"./defaults":15,"./helpers/bind":16,"./helpers/spread":24,"./utils":25}],4:[function(t,e,i){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},{}],5:[function(t,e,i){"use strict";var n=t("./Cancel");function a(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var i=this;t(function(t){i.reason||(i.reason=new n(t),e(i.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e;return{token:new a(function(t){e=t}),cancel:e}},e.exports=a},{"./Cancel":4}],6:[function(t,e,i){"use strict";e.exports=function(t){return!(!t||!t.__CANCEL__)}},{}],7:[function(t,e,i){"use strict";var a=t("./../utils"),n=t("../helpers/buildURL"),s=t("./InterceptorManager"),r=t("./dispatchRequest"),o=t("./mergeConfig");function c(t){this.defaults=t,this.interceptors={request:new s,response:new s}}c.prototype.request=function(t,e){"string"==typeof t?(t=e||{}).url=arguments[0]:t=t||{},(t=o(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var i=[r,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){i.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){i.push(t.fulfilled,t.rejected)});i.length;)n=n.then(i.shift(),i.shift());return n},c.prototype.getUri=function(t){return t=o(this.defaults,t),n(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},a.forEach(["delete","get","head","options"],function(i){c.prototype[i]=function(t,e){return this.request(a.merge(e||{},{method:i,url:t}))}}),a.forEach(["post","put","patch"],function(n){c.prototype[n]=function(t,e,i){return this.request(a.merge(i||{},{method:n,url:t,data:e}))}}),e.exports=c},{"../helpers/buildURL":17,"./../utils":25,"./InterceptorManager":8,"./dispatchRequest":10,"./mergeConfig":12}],8:[function(t,e,i){"use strict";var n=t("./../utils");function a(){this.handlers=[]}a.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},a.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},a.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=a},{"./../utils":25}],9:[function(t,e,i){"use strict";var r=t("./enhanceError");e.exports=function(t,e,i,n,a){var s=new Error(t);return r(s,e,i,n,a)}},{"./enhanceError":11}],10:[function(t,e,i){"use strict";var n=t("./../utils"),a=t("./transformData"),s=t("../cancel/isCancel"),r=t("../defaults"),o=t("./../helpers/isAbsoluteURL"),c=t("./../helpers/combineURLs");function d(t){t.cancelToken&&t.cancelToken.throwIfRequested()}e.exports=function(e){return d(e),e.baseURL&&!o(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||r.adapter)(e).then(function(t){return d(e),t.data=a(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(d(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},{"../cancel/isCancel":6,"../defaults":15,"./../helpers/combineURLs":18,"./../helpers/isAbsoluteURL":20,"./../utils":25,"./transformData":14}],11:[function(t,e,i){"use strict";e.exports=function(t,e,i,n,a){return t.config=e,i&&(t.code=i),t.request=n,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},{}],12:[function(t,e,i){"use strict";var a=t("../utils");e.exports=function(e,i){i=i||{};var n={};return a.forEach(["url","method","params","data"],function(t){void 0!==i[t]&&(n[t]=i[t])}),a.forEach(["headers","auth","proxy"],function(t){a.isObject(i[t])?n[t]=a.deepMerge(e[t],i[t]):void 0!==i[t]?n[t]=i[t]:a.isObject(e[t])?n[t]=a.deepMerge(e[t]):void 0!==e[t]&&(n[t]=e[t])}),a.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(t){void 0!==i[t]?n[t]=i[t]:void 0!==e[t]&&(n[t]=e[t])}),n}},{"../utils":25}],13:[function(t,e,i){"use strict";var a=t("./createError");e.exports=function(t,e,i){var n=i.config.validateStatus;!n||n(i.status)?t(i):e(a("Request failed with status code "+i.status,i.config,null,i.request,i))}},{"./createError":9}],14:[function(t,e,i){"use strict";var n=t("./../utils");e.exports=function(e,i,t){return n.forEach(t,function(t){e=t(e,i)}),e}},{"./../utils":25}],15:[function(o,c,t){(function(t){"use strict";var i=o("./utils"),n=o("./helpers/normalizeHeaderName"),e={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,r={adapter:(void 0!==t&&"[object process]"===Object.prototype.toString.call(t)?s=o("./adapters/http"):"undefined"!=typeof XMLHttpRequest&&(s=o("./adapters/xhr")),s),transformRequest:[function(t,e){return n(e,"Accept"),n(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return 200<=t&&t<300}};r.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){r.headers[t]={}}),i.forEach(["post","put","patch"],function(t){r.headers[t]=i.merge(e)}),c.exports=r}).call(this,o("_process"))},{"./adapters/http":2,"./adapters/xhr":2,"./helpers/normalizeHeaderName":22,"./utils":25,_process:27}],16:[function(t,e,i){"use strict";e.exports=function(i,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return i.apply(n,t)}}},{}],17:[function(t,e,i){"use strict";var r=t("./../utils");function o(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(t,e,i){if(!e)return t;var n;if(i)n=i(e);else if(r.isURLSearchParams(e))n=e.toString();else{var a=[];r.forEach(e,function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))}))}),n=a.join("&")}if(n){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t}},{"./../utils":25}],18:[function(t,e,i){"use strict";e.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},{}],19:[function(t,e,i){"use strict";var o=t("./../utils");e.exports=o.isStandardBrowserEnv()?{write:function(t,e,i,n,a,s){var r=[];r.push(t+"="+encodeURIComponent(e)),o.isNumber(i)&&r.push("expires="+new Date(i).toGMTString()),o.isString(n)&&r.push("path="+n),o.isString(a)&&r.push("domain="+a),!0===s&&r.push("secure"),document.cookie=r.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":25}],20:[function(t,e,i){"use strict";e.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},{}],21:[function(t,e,i){"use strict";var n,a,s,r=t("./../utils");function o(t){var e=t;return a&&(s.setAttribute("href",e),e=s.href),s.setAttribute("href",e),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}e.exports=r.isStandardBrowserEnv()?(a=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),n=o(window.location.href),function(t){var e=r.isString(t)?o(t):t;return e.protocol===n.protocol&&e.host===n.host}):function(){return!0}},{"./../utils":25}],22:[function(t,e,i){"use strict";var a=t("../utils");e.exports=function(i,n){a.forEach(i,function(t,e){e!==n&&e.toUpperCase()===n.toUpperCase()&&(i[n]=t,delete i[e])})}},{"../utils":25}],23:[function(t,e,i){"use strict";var s=t("./../utils"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(t){var e,i,n,a={};return t&&s.forEach(t.split("\n"),function(t){if(n=t.indexOf(":"),e=s.trim(t.substr(0,n)).toLowerCase(),i=s.trim(t.substr(n+1)),e){if(a[e]&&0<=r.indexOf(e))return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([i]):a[e]?a[e]+", "+i:i}}),a}},{"./../utils":25}],24:[function(t,e,i){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},{}],25:[function(t,e,i){"use strict";var a=t("./helpers/bind"),n=t("is-buffer"),s=Object.prototype.toString;function r(t){return"[object Array]"===s.call(t)}function o(t){return null!==t&&"object"==typeof t}function c(t){return"[object Function]"===s.call(t)}function d(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),r(t))for(var i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.call(null,t[a],a,t)}e.exports={isArray:r,isArrayBuffer:function(t){return"[object ArrayBuffer]"===s.call(t)},isBuffer:n,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:o,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===s.call(t)},isFile:function(t){return"[object File]"===s.call(t)},isBlob:function(t){return"[object Blob]"===s.call(t)},isFunction:c,isStream:function(t){return o(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:d,merge:function i(){var n={};function t(t,e){"object"==typeof n[e]&&"object"==typeof t?n[e]=i(n[e],t):n[e]=t}for(var e=0,a=arguments.length;e<a;e++)d(arguments[e],t);return n},deepMerge:function i(){var n={};function t(t,e){"object"==typeof n[e]&&"object"==typeof t?n[e]=i(n[e],t):n[e]="object"==typeof t?i({},t):t}for(var e=0,a=arguments.length;e<a;e++)d(arguments[e],t);return n},extend:function(i,t,n){return d(t,function(t,e){i[e]=n&&"function"==typeof t?a(t,n):t}),i},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},{"./helpers/bind":16,"is-buffer":26}],26:[function(t,e,i){e.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},{}],27:[function(t,e,i){var n,a,s=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(t){a=o}}();var d,l=[],h=!1,p=-1;function u(){h&&d&&(h=!1,d.length?l=d.concat(l):p=-1,l.length&&f())}function f(){if(!h){var t=c(u);h=!0;for(var e=l.length;e;){for(d=l,l=[];++p<e;)d&&d[p].run();p=-1,e=l.length}d=null,h=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function m(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new v(t,e)),1!==l.length||h||c(f)},v.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],28:[function(t,e,i){"use strict";var o=t("../dnd/player.js"),c=t("../dnd/npc.js"),d=t("../dnd/vehicle.js"),l=[],h=[],p=[];e.exports.pull=function(t,e){l.length=0,h.length=0;for(var i=p.length=0,n=t.players.length;i<n;i++){var a=new o;a.parse(t.players[i]),l.push(a)}for(i=0,n=t.npcs.length;i<n;i++){var s=new c;s.parse(t.npcs[i]),h.push(s)}for(i=0,n=t.vehicles.length;i<n;i++){var r=new d;r.parse(t.vehicles[i]),p.push(r)}u()};var u=function(){for(var t={npcs:[],players:[],vehicles:[]},e=0,i=h.length;e<i;e++)t.npcs.push(h[e].serialize());for(e=0,i=l.length;e<i;e++)t.players.push(l[e].serialize());for(e=0,i=p.length;e<i;e++)t.vehicles.push(p[e].serialize());return t};e.exports.push=u,e.exports.reset=function(){},e.exports.charsByState=function(t,e){if(Utils.isFunction(e)){var i=[];if(t===CharacterState.Idle)for(var n=0,a=p.length;n<a;n++)i.push(p[n]);for(n=0,a=l.length;n<a;n++)l[n].state===t&&i.push(l[n]);for(n=0,a=h.length;n<a;n++)h[n].state===t&&i.push(h[n]);t===CharacterState.Encounter&&i.sort(function(t,e){return e.initiative-t.initiative});for(n=0,a=i.length;n<a;n++)e.call(i[n])}},e.exports.updatePlayer=function(t,e,i){var n=function(e){var t=null;return Utils.isNumeric(e)&&0<(t=l.filter(function(t){return t.id===e})).length?t[0]:t}(t);if(n)switch(e){case CharacterAction.Initiative:n.applyInitiative(i[0]);break;case CharacterAction.Leave:n.leaveEncounter();break;case CharacterAction.Revive:n.revive();break;case CharacterAction.Die:n.die();break;case CharacterAction.Spell:n.useSpell(i[0],i[1]);break;case CharacterAction.Rest:n.applyRest();break;case CharacterAction.Toggle:n.toggle();break;case CharacterAction.ApplyCondition:n.condition(i[0],i[1])}},e.exports.updateNpc=function(t,e,i){var n=function(e){var t=null;return Utils.isNumeric(e)&&0<(t=h.filter(function(t){return t.id===e})).length?t[0]:t}(t);if(n)switch(e){case CharacterAction.Damage:n.applyDamage(i[0]);break;case CharacterAction.Initiative:if(n.template){var a=n.clone();!function(t){h.push(t)}(a),n=a}n.rollInitiative();break;case CharacterAction.Leave:n.leaveEncounter();break;case CharacterAction.Revive:n.revive();break;case CharacterAction.Die:n.die();break;case CharacterAction.Spell:n.useSpell(i[0],i[1]);break;case CharacterAction.Rest:n.applyRest();break;case CharacterAction.Toggle:n.toggle();break;case CharacterAction.ApplyCondition:n.condition(i[0],i[1])}},e.exports.updateVehicle=function(t,e,i){var n=function(e){var t=null;return Utils.isNumeric(e)&&0<(t=p.filter(function(t){return t.id===e})).length?t[0]:t}(t);if(n)switch(e){case CharacterAction.Damage:n.applyDamage(i[0],i[1]);break;case CharacterAction.Toggle:n.toggle()}}},{"../dnd/npc.js":35,"../dnd/player.js":36,"../dnd/vehicle.js":38}],29:[function(e,r,t){(function(n){"use strict";function a(t){return localStorage.setItem(i,t)}var s=e("axios"),i="OssariaSessionTwelve",t=0;r.exports.pull=function(){var t=localStorage.getItem(i);return t?function(i){return new Promise(function(t,e){try{t([JSON.parse(i)])}catch(t){e(t)}})}(t):new Promise(function(e,i){s.get(n.DataFile).then(function(t){a(JSON.stringify(t.data)),e([t.data])}).catch(function(t){i(t)})})},r.exports.push=function(i){return new Promise(function(t,e){try{a(JSON.stringify(i)),t()}catch(t){e(t)}})},r.exports.reset=function(){return new Promise(function(t,e){try{localStorage.removeItem(i),t()}catch(t){e(t)}})},r.exports.assignId=function(){return++t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{axios:1}],30:[function(t,e,i){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){a=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(){h.push(l.push()).then(function(){o()})}var l=t("./entities.js"),h=t("./storage.js"),a=document.getElementById("active"),s=document.getElementById("inactive"),r=document.getElementById("deadguys"),o=function(){a.innerHTML="",s.innerHTML="",r.innerHTML="",l.charsByState(CharacterState.Encounter,function(){var t=document.createElement("tr"),e=document.createElement("td");e.innerHTML=this.render(),t.appendChild(e),a.appendChild(t)}),l.charsByState(CharacterState.Idle,function(){var t=document.createElement("tr"),e=document.createElement("td");e.innerHTML=this.render(),t.appendChild(e),s.appendChild(t)}),l.charsByState(CharacterState.Dead,function(){var t=document.createElement("tr"),e=document.createElement("td");e.innerHTML=this.render(),t.appendChild(e),r.appendChild(t)})};e.exports={run:function(){document.addEventListener("click",function(t){if(t.target){var e=!0,i=parseInt(t.target.getAttribute("data-id"));switch(t.target.className){case"hard_reset":if(e=!1,confirm("Are you sure? This cannot be undone.")){var n=document.getElementById("main-content");h.reset().then(function(){l.reset(),n.innerHTML="resetting up in here",setTimeout(function(){return window.location.reload()},600)})}break;case"player_initiative":var a=parseInt(document.getElementById("player_initiative_"+i).value);Utils.isInteger(a)&&l.updatePlayer(i,CharacterAction.Initiative,[a]);break;case"player_leave":l.updatePlayer(i,CharacterAction.Leave);break;case"player_revive":l.updatePlayer(i,CharacterAction.Revive);break;case"player_die":l.updatePlayer(i,CharacterAction.Die);break;case"player_concentrate":l.updatePlayer(i,CharacterAction.Concentrate);break;case"player_toggle":l.updatePlayer(i,CharacterAction.Toggle);break;case"player_condition_remove":l.updatePlayer(i,CharacterAction.ApplyCondition,[t.target.getAttribute("data-condition"),!1]);break;case"npc_initiative":l.updateNpc(i,CharacterAction.Initiative);break;case"npc_damage":var s=parseInt(document.getElementById("npc_damage_"+i).value);Utils.isInteger(s)&&l.updateNpc(i,CharacterAction.Damage,[s]);break;case"npc_leave":l.updateNpc(i,CharacterAction.Leave);break;case"npc_revive":l.updateNpc(i,CharacterAction.Revive);break;case"npc_die":l.updateNpc(i,CharacterAction.Die);break;case"npc_rest":l.updateNpc(i,CharacterAction.Rest);break;case"npc_spell_slot":var r=parseInt(t.target.getAttribute("data-level-id")),o=t.target.checked;Utils.isInteger(r)&&l.updateNpc(i,CharacterAction.Spell,[r,o]);break;case"npc_concentrate":l.updateNpc(i,CharacterAction.Concentrate);break;case"npc_toggle":l.updateNpc(i,CharacterAction.Toggle);break;case"npc_condition_remove":l.updateNpc(i,CharacterAction.ApplyCondition,[t.target.getAttribute("data-condition"),!1]);break;case"vehicle_toggle":l.updateVehicle(i,CharacterAction.Toggle);break;case"component_damage":var c=parseInt(t.target.getAttribute("data-vehicle-id"));s=parseInt(document.getElementById("component_damage_"+i).value),Utils.isInteger(s)&&l.updateVehicle(c,CharacterAction.Damage,[i,s]);break;default:e=!1}e&&d()}}),document.addEventListener("change",function(t){if(t.target){var e=!0,i=parseInt(t.target.getAttribute("data-id"));switch(t.target.className){case"player_condition_add":l.updatePlayer(i,CharacterAction.ApplyCondition,[t.target.options[t.target.selectedIndex].value,!0]);break;case"npc_condition_add":l.updateNpc(i,CharacterAction.ApplyCondition,[t.target.options[t.target.selectedIndex].value,!0]);break;case"player_exhaustion":l.updatePlayer(i,CharacterAction.ApplyCondition,[CharacterCondition.Exhaustion,parseInt(t.target.options[t.target.selectedIndex].value)]);break;case"npc_exhaustion":l.updateNpc(i,CharacterAction.ApplyCondition,[CharacterCondition.Exhaustion,parseInt(t.target.options[t.target.selectedIndex].value)]);break;default:e=!1}e&&d()}}),h.pull().then(function(t){var e=n(t,1)[0];l.pull(e),o()})}}},{"./entities.js":28,"./storage.js":29}],31:[function(t,e,i){"use strict";function n(){this.id=0,this.vehicleId=0,this.name="",this.health=0,this.maxHealth=0,this.armor=0,this.speed=0,this.decrement=0,this.stages=0,this.threshold=0,this.attackToHit=0,this.attackRoll="1d6",this.attackRange="120/320",this.attackDamage="piercing",this.visible=!0}var a=t("../app/storage.js");n.prototype.parse=function(t){t&&(t.id&&Utils.isNumeric(t.id)&&(this.id=t.id),0===this.id&&(this.id=a.assignId()),t.vehicleId&&Utils.isNumeric(t.vehicleId)&&(this.vehicleId=t.vehicleId),t.name&&(this.name=t.name),t.health&&Utils.isNumeric(t.health)&&(this.health=t.health),t.maxHealth&&Utils.isNumeric(t.maxHealth)&&(this.maxHealth=t.maxHealth),t.armor&&Utils.isNumeric(t.armor)&&(this.armor=t.armor),t.speed&&Utils.isNumeric(t.speed)&&(this.speed=t.speed),t.decrement&&Utils.isNumeric(t.decrement)&&(this.decrement=t.decrement),t.stages&&Utils.isNumeric(t.stages)&&(this.stages=t.stages),t.threshold&&Utils.isNumeric(t.threshold)&&(this.threshold=t.threshold),t.attackToHit&&Utils.isNumeric(t.attackToHit)&&(this.attackToHit=t.attackToHit),t.attackRoll&&(this.attackRoll=t.attackRoll),t.attackRange&&(this.attackRoll=t.attackRoll),t.attackDamage&&(this.attackDamage=t.attackDamage),t.visible&&(this.visible=t.visible))},n.prototype.serialize=function(){return{id:this.id,vehicleId:this.vehicleId,name:this.name,health:this.health,maxHealth:this.maxHealth,armor:this.armor,speed:this.speed,decrement:this.decrement,stages:this.stages,threshold:this.threshold,attackToHit:this.attackToHit,attackRoll:this.attackRoll,attackRange:this.attackRange,attackDamage:this.attackDamage,visible:this.visible}},n.prototype.render=function(){var t='<div class="component" data-id="'+this.id+'">';return t+='<div class="bold">'+this.name+"</div>",0<this.speed&&(t+='<div><span class="bold">Speed:</span> '+this.calculateSpeed()+"</div>"),t+='<div>Health: <span class="bold">'+this.health+'</span>, AC: <span class="bold">'+this.armor+"</span></div>",t+='<div><input type="button" class="component_damage" value="Apply Damage" data-id="'+this.id+'" data-vehicle-id="'+this.vehicleId+'" /><input type="text" id="component_damage_'+this.id+'" /></div>',0<this.attackToHit&&(t+='<div class="component-attack"><div class="bold">Ranged Weapon Attack</div>',t+="<div>1d20 + "+this.attackToHit+" to hit, "+this.attackRoll+"</div>",t+='<div class="italic">'+this.attackDamage+"</div></div>"),t+="</div>"},n.prototype.calculateSpeed=function(){var t=0;if(0<this.stages&&this.health<this.maxHealth)if(0<this.health)for(var e=Math.floor(this.maxHealth/this.stages),i=this.stages;0<i;i--)e*i>=this.health&&(t+=this.decrement);else t=this.speed;return Utils.clamp(this.speed-t,0,this.speed)},n.prototype.applyDamage=function(t){0<this.threshold?Math.abs(t)>=this.threshold&&(this.health-=t):this.health-=t,this.health=Utils.clamp(this.health,0,this.maxHealth)},e.exports=n},{"../app/storage.js":29}],32:[function(t,e,i){"use strict";function n(){this.id=0,this.parentId=0,this.exhaustion=0,this.concentrating=!1,this.blinded=!1,this.deafened=!1,this.charmed=!1,this.frightened=!1,this.grappled=!1,this.incapacitated=!1,this.invisible=!1,this.paralyzed=!1,this.petrified=!1,this.poisoned=!1,this.prone=!1,this.restrained=!1,this.stunned=!1,this.unconscious=!1,this.hexed=!1,this.huntersmark=!1,this.isPlayer=!1}var a=t("../app/storage.js");n.prototype.parse=function(t){t&&(t.id&&Utils.isNumeric(t.id)&&(this.id=t.id),0===this.id&&(this.id=a.assignId()),t.parentId&&Utils.isNumeric(t.parentId)&&(this.parentId=t.parentId),t.exhaustion&&Utils.isNumeric(t.exhaustion)&&(this.exhaustion=Utils.clamp(t.exhaustion,0,6)),t.concentrating&&(this.concentrating=t.concentrating),t.blinded&&(this.blinded=t.blinded),t.deafened&&(this.deafened=t.deafened),t.charmed&&(this.charmed=t.charmed),t.blinded&&(this.blinded=t.blinded),t.deafened&&(this.deafened=t.deafened),t.charmed&&(this.charmed=t.charmed),t.frightened&&(this.frightened=t.frightened),t.grappled&&(this.grappled=t.grappled),t.incapacitated&&(this.incapacitated=t.incapacitated),t.invisible&&(this.invisible=t.invisible),t.paralyzed&&(this.paralyzed=t.paralyzed),t.petrified&&(this.petrified=t.petrified),t.poisoned&&(this.poisoned=t.poisoned),t.prone&&(this.prone=t.prone),t.restrained&&(this.restrained=t.restrained),t.stunned&&(this.stunned=t.stunned),t.unconscious&&(this.unconscious=t.unconscious),t.hexed&&(this.hexed=t.hexed),t.huntersmark&&(this.huntersmark=t.huntersmark))},n.prototype.serialize=function(){return{id:this.id,parentId:this.parentId,exhaustion:Utils.clamp(this.exhaustion,0,6),concentrating:this.concentrating,blinded:this.blinded,deafened:this.deafened,charmed:this.charmed,frightened:this.frightened,grappled:this.grappled,incapacitated:this.incapacitated,invisible:this.invisible,paralyzed:this.paralyzed,petrified:this.petrified,poisoned:this.poisoned,prone:this.prone,restrained:this.restrained,stunned:this.stunned,unconscious:this.unconscious,hexed:this.hexed,huntersmark:this.huntersmark}},n.prototype.clone=function(t){var e=new n;return e.parse({parentId:t,concentrating:!1,exhaustion:0,blinded:!1,deafened:!1,charmed:!1,frightened:!1,grappled:!1,incapacitated:!1,invisible:!1,paralyzed:!1,petrified:!1,poisoned:!1,prone:!1,restrained:!1,stunned:!1,unconscious:!1,hexed:!1,huntersmark:!1}),e},n.prototype.setValue=function(t,e){switch(t){case CharacterCondition.Concentrating:this.concentrating=!!e;break;case CharacterCondition.Exhaustion:this.exhaustion=Utils.isNumeric(e)?Utils.clamp(e,0,6):0;break;case CharacterCondition.Blinded:this.blinded=!!e;break;case CharacterCondition.Deafened:this.deafened=!!e;break;case CharacterCondition.Charmed:this.charmed=!!e;break;case CharacterCondition.Frightened:this.frightened=!!e;break;case CharacterCondition.Grappled:this.grappled=!!e;break;case CharacterCondition.Incapacitated:this.incapacitated=!!e;break;case CharacterCondition.Invisible:this.invisible=!!e;break;case CharacterCondition.Paralyzed:this.paralyzed=!!e;break;case CharacterCondition.Petrified:this.petrified=!!e;break;case CharacterCondition.Poisoned:this.poisoned=!!e;break;case CharacterCondition.Prone:this.prone=!!e;break;case CharacterCondition.Restrained:this.restrained=!!e;break;case CharacterCondition.Stunned:this.stunned=!!e;break;case CharacterCondition.Unconscious:this.unconscious=!!e;break;case CharacterCondition.Hexed:this.hexed=!!e;break;case CharacterCondition.HuntersMark:this.huntersmark=!!e}},n.prototype.render=function(){var t="";this.isPlayer?t+='<select class="player_condition_add" data-id="'+this.parentId+'">':t+='<select class="npc_condition_add" data-id="'+this.parentId+'">',t+='<option value="0"> -- Select -- </option>',t+='<option value="'+CharacterCondition.Blinded+'">Blinded</option>',t+='<option value="'+CharacterCondition.Charmed+'">Charmed</option>',t+='<option value="'+CharacterCondition.Concentrating+'">Concentrating</option>',t+='<option value="'+CharacterCondition.Deafened+'">Deafened</option>',t+='<option value="'+CharacterCondition.Frightened+'">Frightened</option>',t+='<option value="'+CharacterCondition.Grappled+'">Grappled</option>',t+='<option value="'+CharacterCondition.Hexed+'">Hexed</option>',t+='<option value="'+CharacterCondition.HuntersMark+"\">Hunter's Mark</option>",t+='<option value="'+CharacterCondition.Incapacitated+'">Incapacitated</option>',t+='<option value="'+CharacterCondition.Invisible+'">Invisible</option>',t+='<option value="'+CharacterCondition.Paralyzed+'">Paralyzed</option>',t+='<option value="'+CharacterCondition.Petrified+'">Petrified</option>',t+='<option value="'+CharacterCondition.Poisoned+'">Poisoned</option>',t+='<option value="'+CharacterCondition.Prone+'">Prone</option>',t+='<option value="'+CharacterCondition.Restrained+'">Restrained</option>',t+='<option value="'+CharacterCondition.Stunned+'">Stunned</option>',t+='<option value="'+CharacterCondition.Unconscious+'">Unconscious</option>',t+="</select>",this.isPlayer&&(t+='<label class="exhaustion_label">Exhausion: ',t+='<select class="player_exhaustion" data-id="'+this.parentId+'">',t+=0===this.exhaustion?'<option selected="selected" value="0">0</option>':'<option value="0">0</option>',t+=1===this.exhaustion?'<option selected="selected" value="1">1</option>':'<option value="1">1</option>',t+=2===this.exhaustion?'<option selected="selected" value="2">2</option>':'<option value="2">2</option>',t+=3===this.exhaustion?'<option selected="selected" value="3">3</option>':'<option value="3">3</option>',t+=4===this.exhaustion?'<option selected="selected" value="4">4</option>':'<option value="4">4</option>',t+=5===this.exhaustion?'<option selected="selected" value="5">5</option>':'<option value="5">5</option>',t+="</select>",t+="</label>"),this.isPlayer?t+='<div class="player_conditions">':t+='<div class="npc_conditions">';var e=this.isPlayer?"player_condition_remove":"npc_condition_remove";return this.blinded&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Blinded+'">Blinded</div>'),this.charmed&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Charmed+'">Charmed</div>'),this.concentrating&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Concentrating+'">Concentrating</div>'),this.deafened&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Deafened+'">Deafened</div>'),this.frightened&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Frightened+'">Frightened</div>'),this.grappled&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Grappled+'">Grappled</div>'),this.hexed&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Hexed+'">Hexed</div>'),this.huntersmark&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.HuntersMark+"\">Hunter's Mark</div>"),this.incapacitated&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Incapacitated+'">Incapacitated</div>'),this.invisible&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Invisible+'">Invisible</div>'),this.paralyzed&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Paralyzed+'">Paralyzed</div>'),this.petrified&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Petrified+'">Petrified</div>'),this.poisoned&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Poisoned+'">Poisoned</div>'),this.prone&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Prone+'">Prone</div>'),this.restrained&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Restrained+'">Restrained</div>'),this.stunned&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Stunned+'">Stunned</div>'),this.unconscious&&(t+='<div class="'+e+'" data-id="'+this.parentId+'" data-condition="'+CharacterCondition.Unconscious+'">Unconscious</div>'),t+='<div class="clear"></div></div>'},e.exports=n},{"../app/storage.js":29}],33:[function(t,e,i){(function(t){"use strict";t.CharacterState={Dead:"dead",Idle:"alive",Encounter:"encounter"},t.CharacterAction={Damage:"damage",Die:"die",Initiative:"initiative",Leave:"leave",Revive:"revive",Spell:"spell",Rest:"rest",Toggle:"toggle",ApplyCondition:"apply-condition"},t.CharacterCondition={Concentrating:"concentrating",Exhaustion:"exhaustion",Blinded:"blinded",Deafened:"deafened",Charmed:"charmed",Frightened:"frightened",Grappled:"grappled",Incapacitated:"incapacitated",Invisible:"invisible",Paralyzed:"paralyzed",Petrified:"petrified",Poisoned:"poisoned",Prone:"prone",Restrained:"restrained",Stunned:"stunned",Unconscious:"unconscious",Hexed:"hexed",HuntersMark:"huntersmark"},t.DamageType={Acid:"acid",Bludgeoning:"bludgeoning",Cold:"cold",Fire:"fire",Force:"force",Lightning:"lightning",Necrotic:"necrotic",Piercing:"piercing",Poison:"poison",Psychic:"psychic",Radiant:"radiant",Slashing:"slashing",Thunder:"thunder"},e.exports=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(t,e,i){"use strict";e.exports={d4:function(){return Utils.randomInt(1,4)},d6:function(){return Utils.randomInt(1,6)},d8:function(){return Utils.randomInt(1,8)},d10:function(){return Utils.randomInt(1,10)},d12:function(){return Utils.randomInt(1,12)},d20:function(){return Utils.randomInt(1,20)},d100:function(){return Utils.randomInt(1,100)}}},{}],35:[function(t,e,i){"use strict";function s(){this.id=0,this.name="",this.health=5,this.maxHealth=5,this.armor=10,this.speed=15,this.race="Human",this.initiative=0,this.weapons=[],this.spells=[],this.state=CharacterState.Idle,this.link="",this.initMod=0,this.template=!1,this.instance=0,this.visible=!1,this.conditions=null}var r=t("./weapon.js"),o=t("./spell.js"),c=t("./conditions.js"),n=t("../dnd/dice.js"),d=t("../app/storage.js");s.prototype.parse=function(t){if(t){if(t.id&&Utils.isNumeric(t.id)&&(this.id=t.id),0===this.id&&(this.id=d.assignId()),t.name&&(this.name=t.name),t.health&&Utils.isNumeric(t.health)&&(this.health=t.health),t.maxHealth&&Utils.isNumeric(t.maxHealth)&&(this.maxHealth=t.maxHealth),t.armor&&Utils.isNumeric(t.armor)&&(this.armor=t.armor),t.speed&&Utils.isNumeric(t.speed)&&(this.speed=t.speed),t.race&&(this.race=t.race),t.initiative&&Utils.isNumeric(t.initiative)&&(this.initiative=t.initiative),t.state&&(this.state=t.state),t.weapons&&Utils.isArray(t.weapons))for(var e=0,i=t.weapons.length;e<i;e++){var n=new r;n.parse(t.weapons[e]),this.weapons.push(n)}if(t.spells&&Utils.isArray(t.spells))for(e=0,i=t.spells.length;e<i;e++){var a=new o;a.parse(t.spells[e]),0===a.parentId&&(a.parentId=this.id),this.spells.push(a)}t.link&&(this.link=t.link),t.template&&(this.template=t.template),t.initMod&&Utils.isNumeric(t.initMod)&&(this.initMod=t.initMod),t.visible&&(this.visible=t.visible);var s=new c;0===s.parentId&&(s.parentId=this.id),this.conditions=s,t.conditions&&s.parse(t.conditions)}},s.prototype.serialize=function(){for(var t=[],e=0,i=this.weapons.length;e<i;e++)t.push(this.weapons[e].serialize());var n=[];for(e=0,i=this.spells.length;e<i;e++)n.push(this.spells[e].serialize());return{id:this.id,name:this.name,health:this.health,maxHealth:this.maxHealth,armor:this.armor,speed:this.speed,race:this.race,initiative:this.initiative,weapons:t,spells:n,state:this.state,link:this.link,initMod:this.initMod,template:this.template,instance:this.instance,visible:this.visible,conditions:this.conditions.serialize()}},s.prototype.render=function(){var t='<div class="ent npc" data-id="'+this.id+'">',e=this.visible?"close":"open";if(t+='<div><span class="bold">'+this.name+'</span>, <span class="italic">'+this.race+"</span>. Speed: "+this.speed,t+='<input type="button" class="npc_toggle" data-id="'+this.id+'" value="'+e+'" /><div class="clear"></div></div>',this.visible){var i="";this.state===CharacterState.Encounter&&(i=" ("+(0<this.health?"alive":"dead")+'), Initiative: <span class="bold">'+this.initiative+"</span>"),t+='<div>Health: <span class="bold">'+this.health+'</span>, AC: <span class="bold">'+this.armor+"</span>"+i+"</div>";for(var n=0,a=this.weapons.length;n<a;n++)t+="<div>"+this.weapons[n].render()+"</div>";if(0<this.spells.length){t+='<table cellpadding="0" cellspacing="0" border="0" class="npc-spell-list">';for(n=0,a=this.spells.length;n<a;n++)t+=this.spells[n].render();t+="</table>"}this.state===CharacterState.Encounter?(t+='<div><input type="button" class="npc_damage" value="Apply Damage" data-id="'+this.id+'" /><input type="text" id="npc_damage_'+this.id+'" /></div>',t+='<div style="margin-top: 4px;">',t+='<input type="button" class="npc_rest" value="Rest" data-id="'+this.id+'" style="margin-right:5px" />',t+='<input type="button" class="npc_leave" value="Leave Encounter" data-id="'+this.id+'" style="margin-right:5px" />',t+='<input type="button" class="npc_die" value="Die" data-id="'+this.id+'" />',t+="</div>",this.conditions&&(t+=this.conditions.render())):this.state===CharacterState.Idle?(t+="<div>",t+='<input type="button" class="npc_initiative" value="Roll Initiative" data-id="'+this.id+'" />&nbsp;',this.template||(t+='<input type="button" class="npc_rest" value="Rest" data-id="'+this.id+'" />&nbsp;',t+='<input type="button" class="npc_die" value="Die" data-id="'+this.id+'" />'),t+="</div>",!this.template&&this.conditions&&(t+=this.conditions.render())):this.state===CharacterState.Dead&&(t+='<div><input type="button" class="npc_revive" value="Revive NPC" data-id="'+this.id+'" /></div>'),this.link&&(t+='<div><a href="'+this.link+'" target="_blank">D&D Beyond</a></div>')}return t+="</div>"},s.prototype.rollInitiative=function(){this.state=CharacterState.Encounter,this.initiative=n.d20()+this.initMod},s.prototype.applyInitiative=function(t){this.initiative=t,this.state!==CharacterState.Dead&&(this.state=CharacterState.Encounter)},s.prototype.applyDamage=function(t){this.health-=t,this.health<=0&&(this.state=CharacterState.Dead),this.health=Utils.clamp(this.health,0,this.maxHealth)},s.prototype.revive=function(){this.health=1,this.state=CharacterState.Encounter},s.prototype.leaveEncounter=function(){this.initiative=0,this.state=CharacterState.Idle},s.prototype.die=function(){this.health=0,this.state=CharacterState.Dead},s.prototype.clone=function(){var t=new s;this.instance++,t.parse({name:this.name+" #"+this.instance,health:this.health,maxHealth:this.maxHealth,armor:this.armor,speed:this.speed,race:this.race,link:this.link,initMod:this.initMod,visible:this.visible});for(var e=[],i=0,n=this.weapons.length;i<n;i++)e.push(this.weapons[i].clone(t.id));t.weapons=e;var a=[];for(i=0,n=this.spells.length;i<n;i++)a.push(this.spells[i].clone(t.id));return t.spells=a,t},s.prototype.useSpell=function(t,e){for(var i=0,n=this.spells.length;i<n;i++)if(this.spells[i].id===t)return e?this.spells[i].used++:this.spells[i].used--,this.spells[i].used=Utils.clamp(this.spells[i].used,0,this.spells.slots),!0;return!1},s.prototype.applyRest=function(){this.health=this.maxHealth;for(var t=0,e=this.spells.length;t<e;t++)this.spells[t].used=0},s.prototype.toggle=function(){this.visible=!this.visible},s.prototype.condition=function(t,e){this.conditions&&this.conditions.setValue(t,e)},e.exports=s},{"../app/storage.js":29,"../dnd/dice.js":34,"./conditions.js":32,"./spell.js":37,"./weapon.js":39}],36:[function(t,e,i){"use strict";function n(){this.id=0,this.name="",this.player="",this.initiative=0,this.state=CharacterState.Idle,this.link="",this.visible=!1}var a=t("../app/storage.js"),s=t("./conditions.js");n.prototype.parse=function(t){if(t){t.id&&Utils.isNumeric(t.id)&&(this.id=t.id),0===this.id&&(this.id=a.assignId()),t.name&&(this.name=t.name),t.player&&(this.player=t.player),t.initiative&&Utils.isNumeric(t.initiative)&&(this.initiative=t.initiative),t.state&&(this.state=t.state),t.link&&(this.link=t.link),t.visible&&(this.visible=t.visible);var e=new s;0===e.parentId&&(e.parentId=this.id),e.isPlayer=!0,this.conditions=e,t.conditions&&e.parse(t.conditions)}},n.prototype.serialize=function(){return{id:this.id,name:this.name,player:this.player,initiative:this.initiative,state:this.state,link:this.link,visible:this.visible,conditions:this.conditions.serialize()}},n.prototype.render=function(){var t='<div class="ent player" data-id="'+this.id+'">',e=this.visible?"close":"open";return t+='<div><span class="bold">'+this.name+'</span> <span class="italics">'+this.player+"</span>",t+='<input type="button" class="player_toggle" data-id="'+this.id+'" value="'+e+'" /><div class="clear"></div></div>',this.visible&&(this.state===CharacterState.Encounter?(t+='<div>Initiative: <span class="bold">'+this.initiative+"</span></div>",t+="<div>",t+='<input type="button" class="player_leave" value="Leave Encounter" data-id="'+this.id+'" style="margin-right:5px" />',t+='<input type="button" class="player_die" value="Die" data-id="'+this.id+'" />',t+="</div>",this.conditions&&(t+=this.conditions.render())):this.state===CharacterState.Idle?(t+="<div>",t+='<input type="button" class="player_initiative" value="Apply Initiatve" data-id="'+this.id+'" /><input type="text" id="player_initiative_'+this.id+'" />',t+='<input type="button" class="player_die" value="Die" data-id="'+this.id+'" />',t+="</div>",this.conditions&&(t+=this.conditions.render())):this.state===CharacterState.Dead&&(t+='<div><input type="button" class="player_revive" value="Revive Player" data-id="'+this.id+'" /></div>'),this.link&&(t+='<div><a href="'+this.link+'" target="_blank">D&D Beyond</a></div>')),t+="</div>"},n.prototype.applyInitiative=function(t){this.initiative=t,this.state=CharacterState.Encounter},n.prototype.leaveEncounter=function(){this.initiative=0,this.state=CharacterState.Idle},n.prototype.revive=function(){this.state=CharacterState.Encounter},n.prototype.die=function(){this.state=CharacterState.Dead},n.prototype.useSpell=function(t,e){return!1},n.prototype.applyRest=function(){},n.prototype.toggle=function(){this.visible=!this.visible},n.prototype.condition=function(t,e){this.conditions&&this.conditions.setValue(t,e)},e.exports=n},{"../app/storage.js":29,"./conditions.js":32}],37:[function(t,e,i){"use strict";function n(){this.id=0,this.parentId=0,this.name="",this.slots=0,this.used=0}var a=t("../app/storage.js");n.prototype.parse=function(t){t&&(t.id&&Utils.isNumeric(t.id)&&(this.id=t.id),0===this.id&&(this.id=a.assignId()),t.parentId&&Utils.isNumeric(t.parentId)&&(this.parentId=t.parentId),t.name&&(this.name=t.name),t.slots&&Utils.isNumeric(t.slots)&&(this.slots=Utils.clamp(t.slots,0,999)),t.used&&Utils.isNumeric(t.used)&&(this.used=Utils.clamp(t.used,0,999)))},n.prototype.serialize=function(){return{id:this.id,parentId:this.parentId,name:this.name,slots:this.slots,used:this.used}},n.prototype.serialize=function(){return{id:this.id,parentId:this.parentId,name:this.name,slots:this.slots,used:this.used}},n.prototype.clone=function(t){var e=new n;return e.parse({name:this.name,parentId:t,slots:this.slots,used:this.used}),e},n.prototype.render=function(){var t="<tr>";t+="<td>"+this.name+"</td>";for(var e=0,i=this.slots;e<i;e++)t+="<td>",e+1<=this.used?t+='<input class="npc_spell_slot" type="checkbox" checked="checked" data-id="'+this.parentId+'" data-level-id="'+this.id+'" />':t+='<input class="npc_spell_slot" type="checkbox" data-id="'+this.parentId+'" data-level-id="'+this.id+'" />',t+="</td>";return t+="</tr>"},e.exports=n},{"../app/storage.js":29}],38:[function(t,e,i){"use strict";function n(){this.id=0,this.name="",this.type="",this.components=[],this.link="",this.visible=!1}var a=t("./component.js"),s=t("../app/storage.js");n.prototype.parse=function(t){if(t){if(t.id&&Utils.isNumeric(t.id)&&(this.id=t.id),0===this.id&&(this.id=s.assignId()),t.name&&(this.name=t.name),t.type&&(this.type=t.type),t.components&&Utils.isArray(t.components))for(var e=0,i=t.components.length;e<i;e++){var n=new a;n.parse(t.components[e]),0===n.vehicleId&&(n.vehicleId=this.id),this.components.push(n)}t.link&&(this.link=t.link),t.visible&&(this.visible=t.visible)}},n.prototype.serialize=function(){for(var t=[],e=0,i=this.components.length;e<i;e++)t.push(this.components[e]);return{id:this.id,name:this.name,type:this.type,components:t,link:this.link,visible:this.visible}},n.prototype.render=function(){var t='<div class="ent vehicle" data-id="'+this.id+'">',e=this.visible?"close":"open";if(t+='<div><span class="bold">'+this.name+'</span> <span class="italics">'+this.type+"</span> ",t+='<input type="button" class="vehicle_toggle" data-id="'+this.id+'" value="'+e+'" /><div class="clear"></div></div>',this.visible){if(0<this.components.length){t+='<div class="components">',t+='<table cellpadding="0" cellspacing="2" border="0">';for(var i=0,n=this.components.length;i<n;i++)i%2==0&&(t+="<tr>"),t+="<td>"+this.components[i].render()+"</td>",i%2!=0&&(t+="</tr>");i%2==0&&(t+="</tr>"),t+="</table>",t+="</div>"}this.link&&(t+='<div><a href="'+this.link+'" target="_blank">D&D Beyond</a></div>')}return t+="</div>"},n.prototype.applyDamage=function(t,e){for(var i=0,n=this.components.length;i<n;i++)if(this.components[i].id===t)return this.components[i].applyDamage(e),!0;return!1},n.prototype.toggle=function(){this.visible=!this.visible},e.exports=n},{"../app/storage.js":29,"./component.js":31}],39:[function(t,e,i){"use strict";function n(){this.id=0,this.parentId=0,this.name="",this.dice="1d4",this.hitMod=0,this.attackMod=0,this.damageType=DamageType.Bludgeoning}var a=t("../app/storage.js");n.prototype.parse=function(t){t&&(t.id&&Utils.isNumeric(t.id)&&(this.id=t.id),0===this.id&&(this.id=a.assignId()),t.parentId&&Utils.isNumeric(t.parentId)&&(this.parentId=t.parentId),t.name&&(this.name=t.name),t.dice&&(this.dice=t.dice),t.hitMod&&Utils.isNumeric(t.hitMod)&&(this.hitMod=Utils.clamp(t.hitMod,0,999)),t.attackMod&&Utils.isNumeric(t.attackMod)&&(this.attackMod=Utils.clamp(t.attackMod,0,999)),t.damageType&&(this.damageType=t.damageType))},n.prototype.serialize=function(){return{id:this.id,name:this.name,dice:this.dice,hitMod:this.hitMod,attackMod:this.attackMod,damageType:this.damageType}},n.prototype.clone=function(t){var e=new n;return e.parse({name:this.name,parentId:t,dice:this.dice,hitMod:this.hitMod,attackMod:this.attackMod,damageType:this.damageType}),e},n.prototype.render=function(){var t='<span class="bold">'+this.name+"</span>: 1d20";return 0<this.hitMod&&(t+=" + "+this.hitMod),t+=" to hit, "+this.dice,0<this.attackMod&&(t+=" + "+this.attackMod),t+=', <span class="italic">'+this.damageType+"</span>"},e.exports=n},{"../app/storage.js":29}],40:[function(i,n,t){(function(t){"use strict";t.Debug=i("./utils/debug.js"),t.Utils=i("./utils/utils.js"),i("./dnd/constants.js"),t.DataFile="/json/state.json";var e=i("./app/ui.js");n.exports={run:e.run}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./app/ui.js":30,"./dnd/constants.js":33,"./utils/debug.js":41,"./utils/utils.js":44}],41:[function(t,e,i){"use strict";e.exports={assert:console?console.assert.bind(console):function(){},clear:console?console.clear.bind(console):function(){},error:console?console.error.bind(console):function(){},group:console?console.group.bind(console):function(){},groupCollapsed:console?console.groupCollapsed.bind(console):function(){},groupEnd:console?console.groupEnd.bind(console):function(){},info:console?console.info.bind(console):function(){},log:console?console.log.bind(console):function(){},trace:console?console.trace.bind(console):function(){},warn:console?console.warn.bind(console):function(){}}},{}],42:[function(t,e,i){"use strict";function n(t,e){return Math.floor(Math.random()*(e-t+1))+t}e.exports={clamp:function(t,e,i){return t<e?e:i<t?i:t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},randomInt:n,randomChance:function(t){return t=t||50,n(1,100)<=t}}},{}],43:[function(t,e,i){"use strict";e.exports={isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},arrayClone:function(t){return t.slice(0)},isFunction:function(t){return"function"==typeof t},isInteger:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},storageAvailable:function(t){try{var e=window[t],i="__storage_test__";return e.setItem(i,i),e.removeItem(i),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&0!==e.length}}}},{}],44:[function(t,e,i){"use strict";function n(t){for(var e in t)t.hasOwnProperty(e)&&(a[e]=t[e])}var a={};n(t("./numbers.js")),n(t("./tools.js")),e.exports=a},{"./numbers.js":42,"./tools.js":43}]},{},[40])(40)});